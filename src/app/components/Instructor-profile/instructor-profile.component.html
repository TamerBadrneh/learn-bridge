<div class="profile-container container my-3">
  <header class="text-center my-4">
    <h1 class="fw-bold">Instructor Profile</h1>
  </header>

  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    class="w-75 px-4 py-4 rounded-4 mx-auto shadow-sm bg-light"
    enctype="multipart/form-data"
  >
    <!-- Image Preview & Upload -->
    <div class="mb-4 text-center">
      <img
        [src]="imagePreview || 'assets/images/default-avatar.png'"
        class="rounded-circle"
        width="120"
        height="120"
        alt="Profile Image"
      />
      <div class="mt-3 d-flex justify-content-center gap-3">
        <label class="btn btn-outline-secondary mb-0">
          Select Photo
          <input
            type="file"
            accept="image/*"
            (change)="onFileSelected($event)"
            class="d-none"
          />
        </label>
        <button
          type="button"
          class="btn btn-primary"
          [disabled]="!selectedFile"
          (click)="uploadImage()"
        >
          Upload Photo
        </button>
      </div>
    </div>

    <!-- First Name -->
    <div class="mb-3">
      <label for="firstName" class="form-label">First Name</label>
      <input
        id="firstName"
        type="text"
        class="form-control"
        formControlName="firstName"
      />
      <div
        class="text-danger"
        *ngIf="form.get('firstName')?.invalid && form.get('firstName')?.touched"
      >
        First Name is required
      </div>
    </div>

    <!-- Last Name -->
    <div class="mb-3">
      <label for="lastName" class="form-label">Last Name</label>
      <input
        id="lastName"
        type="text"
        class="form-control"
        formControlName="lastName"
      />
      <div
        class="text-danger"
        *ngIf="form.get('lastName')?.invalid && form.get('lastName')?.touched"
      >
        Last Name is required
      </div>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input
        id="email"
        type="email"
        class="form-control"
        formControlName="email"
      />
      <div
        class="text-danger"
        *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
      >
        Valid Email is required
      </div>
    </div>

    <!-- Favorite Category -->
    <div class="mb-3">
      <label for="category" class="form-label">Favorite Category</label>
      <select
        id="category"
        class="form-select"
        formControlName="favouriteCategory"
      >
        <option value="" disabled>Choose a category</option>
        <option>IT</option>
        <option>MEDICAL</option>
        <option>SCIENCE</option>
        <option>LANGUAGES</option>
      </select>
      <div
        class="text-danger"
        *ngIf="
          form.get('favouriteCategory')?.invalid &&
          form.get('favouriteCategory')?.touched
        "
      >
        Category is required
      </div>
    </div>

    <!-- University Info -->
    <div class="mb-3">
      <label for="university" class="form-label">Academic Details</label>
      <input
        id="university"
        type="text"
        class="form-control"
        formControlName="universityInfo"
      />
      <div
        class="text-danger"
        *ngIf="
          form.get('universityInfo')?.invalid &&
          form.get('universityInfo')?.touched
        "
      >
        Academic details are required
      </div>
    </div>

    <!-- Bio -->
    <div class="mb-3">
      <label for="bio" class="form-label">About</label>
      <textarea
        id="bio"
        class="form-control"
        rows="4"
        formControlName="bio"
      ></textarea>
      <div
        class="text-danger"
        *ngIf="form.get('bio')?.invalid && form.get('bio')?.touched"
      >
        Bio is required
      </div>
    </div>

    <!-- Session Price -->
    <div class="mb-3">
      <label for="price" class="form-label">Session Price (JOD)</label>
      <input
        id="price"
        type="number"
        class="form-control"
        formControlName="avgPrice"
      />
      <div
        class="text-danger"
        *ngIf="form.get('avgPrice')?.invalid && form.get('avgPrice')?.touched"
      >
        Price must be greater than 0
      </div>
    </div>

    <!-- Password & Confirm -->
    <div class="mb-3">
      <label for="password" class="form-label">New Password</label>
      <input
        id="password"
        type="password"
        class="form-control"
        formControlName="password"
      />
    </div>
    <div class="mb-3">
      <label for="confirmPassword" class="form-label">Confirm Password</label>
      <input
        id="confirmPassword"
        type="password"
        class="form-control"
        formControlName="confirmPassword"
      />
      <div
        class="text-danger"
        *ngIf="
          form.get('confirmPassword')?.touched &&
          form.get('password')?.value &&
          form.get('confirmPassword')?.value !== form.get('password')?.value
        "
      >
        Passwords do not match
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-dark w-100 rounded-pill py-2 mt-3"
      [disabled]="form.invalid || passwordsMismatch"
    >
      Save Changes
    </button>
  </form>
</div>
